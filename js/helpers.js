/*
    © Leon Motovskikh, 2017—2021
    leon@motovskikh.ru
*/

"use strict";export function shuffle(array){let j,x,i;for(i=array.length;i;i--){j=Math.floor(Math.random()*i);x=array[i-1];array[i-1]=array[j];array[j]=x}}export function choice(array){return array[Math.floor(Math.random()*array.length)]}export function padZeroes(num,till){if(num.toString().length>till){return num.toString()}const zeroes=new Array(till+1).join("0");return(zeroes+num).substr(-till,till)}export function replaceHref(element,param,value){const href=element.getAttribute("href");element.setAttribute("href",replaceParam(href,param,value+"!"))}function replaceParam(url,param,new_val){const re=new RegExp("("+param+"=).*?(&)");return url.replace(re,"$1"+new_val+"$2")}export function setCookie(name,value,sec,p,d,se){if(!name)return false;let cookie=name+"="+encodeURIComponent(value);let e=new Date;e.setTime(new Date().getTime()+sec*1000);if(e)cookie+="; expires="+e.toUTCString();if(p)cookie+="; path="+p;if(d)cookie+="; domain="+d;if(se)cookie+="; secure";document.cookie=cookie;return true}export function getCookie(name,base){const pt="(?:; )?"+name+"=([^;]*);?";const regexp=new RegExp(pt);if(regexp.test(document.cookie)){return decodeURIComponent(RegExp.$1)}return base}export function setByCookie(cookie,element,object){const val=getCookie(cookie,"true")==="true";element.checked=val;object.on=val;return val}export function getPromise(addr,params){return new Promise((resolve,reject)=>{let xhr=new XMLHttpRequest;xhr.open("POST",addr);xhr.setRequestHeader("Content-Type","application/json; charset=utf-8");xhr.onreadystatechange=()=>{if(xhr.readyState!==4){return}if(xhr.status!==200){reject();return}const result=JSON.parse(xhr.responseText);if(!result.ok){reject();return}resolve(result)};try{xhr.send(JSON.stringify(params))}catch(error){console.log(error)}})}export function fillRegion(region,subclass,colour){region.node.setAttribute("class",subclass);region.node.classList.add(colour)}
